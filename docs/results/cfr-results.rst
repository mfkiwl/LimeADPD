CFR  Results
============

Hardware Setup
--------------

Equipment used:

* Agilent PSA spectrum analyzer.
* Ubuntu PC equipped by LimeSDR-QPCIe board. Runs either Lime Suite GUI or real
  life BTS based on Amarisoft LTE stack, depending on test case scenario.
* Windows 10 PC running Keysight Vector Signal Analyzer (VSA) software for
  modulation analyses. 

In the test cases 1-4 the CFR algorithm is checked against 5MHz, 10MHz, 15MHz
and 20MHz 64 QAM LTE modulated signals, with 20MHz being the most challenging
one. 

In test cases presented below, the signals are generated in different ways:

* The waveforms are generated using the Test Model 3.1 (E-TM 3.1) test
  specification, which applies to most LTE modulation schemes. The test waveform
  is upload into WFM RAM block of LimeSDR-QPCIe board and played. One of the TX
  RF outputs is connected to PSA for the modulation analysis. In the reference
  point, the CFR block is bypassed. In the further measurement points, CFR block
  is enabled. Different CFR options are considered: CFR order L, threshold Th
  and interpolation.
* Real BTS is constructed using Linux Ubuntu PC running Amarisoft LTE stack in
  FDD mode. This scenario checks the performance of Amarisoft LTE stack working
  together with LimeSDR-QPCIe hardware. Antennas are connected to LimeSDR-QPCIe
  RF ports. One of the TX outputs is connected to PSA via RF coupler. Data
  payload is generated by connecting mobile phone(s) to BTS and executing Magic
  Iperf application on both sides. The case when CFR is bypassed is used as the
  reference point for the final comparison. In the further measurement points,
  the CFR block is enabled. 

Test Case 1: LTE 5MHz
---------------------

.. table:: Table 4: CFR Test Case 1 results for E-TM 3.1 LTE 5MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.38   |0.91    |-56.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   |**21**|**0**|**0.75**|**8.12**|**2.18**|**-55.00**| 2.26      | 1.27     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 19   | 0   | 0.75   | 8.12   | 2.12   | -55.00   | 2.26      | 1.21     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 17   | 0   | 0.75   | 8.20   | 2.05   | -55.00   | 2.18      | 1.14     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+  
   |      | 15   | 0   | 0.75   | 8.42   | 1.96   | -55.00   | 1.96      | 1.05     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


.. table:: Table 5: CFR Test Case 1 results for Amarisoft LTE stack 5MHz. 

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.62   |0.61    |-56.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   |**21**|**0**|**0.66**|**8.48**|**2.06**|**-55.00**| 2.14      | 1.45     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


Test Case 2: LTE 10 MHz
-----------------------

.. table:: Table 6: CFR Test case 2 results for E-TM 3.1 LTE 10MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.38   |0.98    |-54.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   | 19   | 0   | 0.75   | 8.28   | 2.28   |-54.00    | 2.04      | 1.3      |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      |**17**|**0**|**0.75**|**8.34**|**2.23**|**-54.00**| 1.98      | 1.25     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 15   | 0   | 0.75   | 8.38   | 2.19   | -54.00   | 1.94      | 1.21     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 13   | 0   | 0.75   | 8.52   | 2.12   | -54.00   | 1.80      | 1.14     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


.. table:: Table 7: CFR Test Case 2 results for Amarisoft LTE stack 10MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.74   |0.55    |-54.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   |**17**|**0**|**0.66**|**8.42**|**2.30**|**-54.00**| 2.32      | 1.75     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


Test Case 3: LTE 15 MHz
-----------------------

.. table:: Table 8: CFR Test case 3 results for E-TM 3.1 LTE 15MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.54   |1.03    |-52.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   | 19   | 1   | 0.75   | 8.34   | 2.22   |-52.00    | 2.20      | 1.19     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      |**17**|**0**|**0.75**|**8.34**|**2.17**|**-52.00**| 2.20      | 1.14     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 15   | 0   | 0.75   | 8.48   | 2.11   | -52.00   | 2.06      | 1.08     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 13   | 0   | 0.75   | 8.48   | 2.06   | -52.00   | 2.06      | 1.03     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


.. table:: Table 9: CFR Test Case 2 results for Amarisoft LTE stack 15MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.94   |0.62    |-52.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   |**17**|**0**|**0.66**|**8.44**|**2.19**|**-52.00**| 2.50      | 1.57     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


Test Case 4: LTE 20 MHz
-----------------------

.. table:: Table 10: CFR Test case 4 results for E-TM 3.1 LTE 20MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |10.54   |1.15    |-51.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   | 17   | 1   | 0.75   | 8.24   | 2.33   |-52.00    | 2.30      | 1.18     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 15   | 1   | 0.75   | 8.24   | 2.29   | -52.00   | 2.30      | 1.14     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      |**13**|**0**|**0.75**|**8.24**|**2.22**|**-52.00**| 2.30      | 1.07     |
   +      +------+-----+--------+--------+--------+----------+-----------+----------+
   |      | 11   | 1   | 0.75   | 8.38   | 2.15   | -52.00   | 2.16      | 1.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


.. table:: Table 11: CFR Test Case 4 results for Amarisoft LTE stack 20MHz.

   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |      |CFR   | CFR | CFR    | PAPR   | EVM    | ACPR     ||deg| PAPR ||deg| EVM |
   |      |L     | Int.| Th     | (dB)   | (%)    | (dBc)    |(dB)       |(%)       |
   +======+======+=====+========+========+========+==========+===========+==========+
   |No CFR| /    |  /  |  /     |11.20   |0.60    |-52.00    | 0.00      | 0.00     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+
   |CFR   |**13**|**1**|**0.66**|**8.42**|**2.30**|**-52.00**| 2.78      | 1.78     |
   +------+------+-----+--------+--------+--------+----------+-----------+----------+


